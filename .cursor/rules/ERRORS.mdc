---
alwaysApply: true
---
## Создание и обработка ошибок V2

- `log.WrapError()` применяется только для обёртки внешних ошибок от сторонних пакетов. Не нужно засорять лишними обёртками собственный код. Исключение, если хочется обогатить ошибку новыми аргументами. Исключение, что ошибки из модуля `util` считаются внешними (иначе циклическая зависимость от модуля `log`).

- `log.NewError()` применяется для явности в тестах и логах: при обработке входных данных функции и при неверном ветвлении кода (vs "true way"). Следует учитывать, что в тестах перехватываем только LevelError.

- возвращать ошибки наружу, только когда это влияет на ветвление кода.

- логировать ошибки, только когда не возвращаем ошибку из функции наружу.

- форматирование ошибок: с малелькой буквы, без точки в конце.